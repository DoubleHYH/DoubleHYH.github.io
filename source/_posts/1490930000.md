---

title: 造一个自动化测试平台的轮子

date: 2017-3-31 12:20

tags: [测试, 轮子, Python]

categories: 自动化测试

---

+ Documentation文件夹

    用来存放文档

+ Report文件夹

    用来存放执行后的报告文件们

+ Source文件夹

    基本上所有的代码都放在这里面，其中包含三个文件夹：

    - Base文件夹

        存放一些用来跟各种包打交道的代码

    - Case文件夹

        这里存放用来执行的Case

    - Function文件夹

        这里存放着各种各样的方法（函数）

+ run.py文件

    显然，这个是启动文件

+ run.conf

    显然，这个是配置文件

文件结构

    .
    ├── Documentation
    ├── Report
    │   ├── Archive
    │   └── Img
    ├── Source
    │   ├── Base
    │   ├── Case
    │   └── Function
    ├── run.conf
    └── run.py

先写配置文件了，很明显配置文件需要放在 `./Source/Base` 文件夹下。用**ConfigParser**包来读取配置。

ConfigParser包有个特点是读取进来的配置不区分大小写，为了让它区分大小写需要重写一个方法(4——6行)。因为配置文件只有一份，所以为了写起来简单粗暴，可以将它实现成（伪）单例模式（13行）。

+ Config.py

        # -*- coding:utf-8 -*-
        import ConfigParser

        class MConfigParser(ConfigParser.SafeConfigParser):
            def optionxform(self, optionstr):
                return optionstr

        class ConfigCtrl(object):
            def __init__(self):
                self.cp = MConfigParser()
                self.cp.read("run.conf")

        Config = ConfigCtrl()


刚开始的启动文件还是比较简单的（想复杂也没东西能让它复杂），只是导入了一个配置文件的类。

+ run.py

        # -*- coding:utf-8 -*-
        from Source.Base.Config import Config

        def main():
            pass

        if __name__ == '__main__':
            main()
